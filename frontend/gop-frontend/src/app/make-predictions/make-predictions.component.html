<div *ngIf="matchday">
  <h1>
    Matchday {{matchday.matchdayNumber}} of {{competition?.name}} {{season?.name}} season
  </h1>
  <div class="d-flex justify-content-between">
    <h3>Fixtures</h3>
    <p *ngIf="!hasMatchdayStarted()"><em>Predictions close at: {{matchday.startTime| date: 'MM-dd-yyyy HH:mm'}}</em></p>
    <p *ngIf="hasMatchdayStarted()"><em>Predictions closed at: {{matchday.startTime| date: 'MM-dd-yyyy HH:mm'}}</em></p>
  </div>
  <table>
    <thead class="table-head">
    <tr>
      <th>Fixture</th>
      <th>Start time</th>
      <th>1</th>
      <th>X</th>
      <th>2</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let fixture of matchday.fixtures">
      <td>
        <div class="d-flex fixture-team">
          <img src="{{ fixture.homeTeam.logo }}" alt="{{ fixture.homeTeam.name }}" class="fixture-img"/>
          <p class="fixture-team-name">{{ fixture.homeTeam.name }}</p>
        </div>
        <div class="d-flex fixture-team">
          <img src="{{ fixture.awayTeam.logo }}" alt="{{ fixture.awayTeam.name }}" class="fixture-img"/>
          <p class="fixture-team-name">{{ fixture.awayTeam.name }}</p>
        </div>
      </td>
      <td>
        {{ fixture.startTime | date: 'MM-dd-yyyy HH:mm' }}
      </td>
      <td
        (click)="onPredictionChange(fixture.id, outcome.HOME_TEAM_WIN)"
        class="td-prediction"
        [ngClass]="{ 'selected': isPredictionSelected(fixture.id, outcome.HOME_TEAM_WIN) }"

      >
        {{ fixture.homeTeamWinCoefficient | number:'1.2-2' }}
      </td>
      <td
        (click)="onPredictionChange(fixture.id, outcome.DRAW)"
        class="td-prediction"
        [ngClass]="{ 'selected': isPredictionSelected(fixture.id, outcome.DRAW) }"
      >
        {{ fixture.drawCoefficient | number:'1.2-2' }}
      </td>
      <td
        (click)="onPredictionChange(fixture.id, outcome.AWAY_TEAM_WIN)"
        class="td-prediction"
        [ngClass]="{ 'selected': isPredictionSelected(fixture.id, outcome.AWAY_TEAM_WIN) }"
      >
        {{ fixture.awayTeamWinCoefficient | number:'1.2-2' }}
      </td>
    </tr>
    </tbody>
  </table>

  <p>{{errorMessage}}</p>
  <button
    *ngIf="!hasMatchdayStarted()"
    (click)="onSubmit()"
  >
    Submit
  </button>
</div>
<div *ngIf="loading">
  <fa-icon [icon]="faSpinner"></fa-icon>
  Loading...
</div>
